{"is_source_file": true, "format": "JavaScript", "description": "WebSocketService class that handles WebSocket connections, including reconnection logic and fallback mechanisms between Socket.IO and native WebSocket.", "external_files": ["socket.io-client"], "external_methods": [], "published": ["WebSocketService"], "classes": [{"name": "WebSocketService", "description": "Handles WebSocket connections with fallback and reconnection logic."}], "methods": [{"name": "initializeSocket()", "description": "Initializes the WebSocket connection with Socket.IO and handles fallback to native WebSocket.", "scope": "WebSocketService", "scopeKind": "class"}, {"name": "setupEventHandlers()", "description": "Sets up event handlers for Socket.IO and native WebSocket connections.", "scope": "WebSocketService", "scopeKind": "class"}, {"name": "handleReconnect()", "description": "Handles reconnection attempts with exponential backoff.", "scope": "WebSocketService", "scopeKind": "class"}, {"name": "addEventListener(event, callback)", "description": "Adds an event listener for a specific event.", "scope": "WebSocketService", "scopeKind": "class"}, {"name": "removeEventListener(event, callback)", "description": "Removes an event listener for a specific event.", "scope": "WebSocketService", "scopeKind": "class"}, {"name": "notifyListeners(event, data)", "description": "Notifies all listeners of an event.", "scope": "WebSocketService", "scopeKind": "class"}, {"name": "send(data)", "description": "Sends data through the active WebSocket connection.", "scope": "WebSocketService", "scopeKind": "class"}, {"name": "getConnectionState()", "description": "Gets the current state of the WebSocket connection.", "scope": "WebSocketService", "scopeKind": "class"}, {"name": "disconnect()", "description": "Disconnects the WebSocket connection and resets reconnection attempts.", "scope": "WebSocketService", "scopeKind": "class"}, {"name": "constructor()", "scope": "WebSocketService", "scopeKind": "class", "description": "unavailable"}], "calls": ["io", "console.log", "console.error", "setTimeout"], "search-terms": ["WebSocketService", "Socket.IO", "reconnect", "WebSocket"], "state": 2, "file_id": 24, "knowledge_revision": 168, "git_revision": "", "revision_history": [{"64": ""}, {"68": ""}, {"71": ""}, {"73": ""}, {"78": ""}, {"79": ""}, {"80": ""}, {"81": ""}, {"82": ""}, {"83": ""}, {"84": ""}, {"85": ""}, {"86": ""}, {"87": ""}, {"88": ""}, {"89": ""}, {"90": ""}, {"91": ""}, {"92": ""}, {"93": ""}, {"94": ""}, {"95": ""}, {"96": ""}, {"97": ""}, {"98": ""}, {"99": ""}, {"100": ""}, {"101": ""}, {"102": ""}, {"103": ""}, {"104": ""}, {"105": ""}, {"106": ""}, {"136": ""}, {"138": ""}, {"139": ""}, {"140": ""}, {"141": ""}, {"142": ""}, {"143": ""}, {"144": ""}, {"145": ""}, {"146": ""}, {"147": ""}, {"148": ""}, {"149": ""}, {"150": ""}, {"153": ""}, {"164": ""}, {"165": ""}, {"166": ""}, {"167": ""}, {"168": ""}], "ctags": [{"_type": "tag", "name": "Connection", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^          'Connection': 'Upgrade',$/", "language": "JavaScript", "kind": "property", "scope": "WebSocketService.initializeSocket.headers", "scopeKind": "class"}, {"_type": "tag", "name": "Sec-WebSocket-Protocol", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^          'Sec-WebSocket-Protocol': 'v1.journal-app',$/", "language": "JavaScript", "kind": "property", "scope": "WebSocketService.initializeSocket.headers", "scopeKind": "class"}, {"_type": "tag", "name": "Sec-WebSocket-Version", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^          'Sec-WebSocket-Version': '13'$/", "language": "JavaScript", "kind": "property", "scope": "WebSocketService.initializeSocket.headers", "scopeKind": "class"}, {"_type": "tag", "name": "Upgrade", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^          'Upgrade': 'websocket',$/", "language": "JavaScript", "kind": "property", "scope": "WebSocketService.initializeSocket.headers", "scopeKind": "class"}, {"_type": "tag", "name": "WebSocketService", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^class WebSocketService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "addEventListener", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^  addEventListener(event, callback) {$/", "language": "JavaScript", "kind": "method", "signature": "(event, callback)", "scope": "WebSocketService", "scopeKind": "class"}, {"_type": "tag", "name": "autoConnect", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^      autoConnect: true,$/", "language": "JavaScript", "kind": "property", "scope": "WebSocketService.constructor.config", "scopeKind": "class"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^    this.config = {$/", "language": "JavaScript", "kind": "class", "scope": "WebSocketService.constructor", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "WebSocketService", "scopeKind": "class"}, {"_type": "tag", "name": "defaultUrl", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^      defaultUrl: process.env.REACT_APP_WS_URL || 'ws:\\/\\/localhost:8080'$/", "language": "JavaScript", "kind": "property", "scope": "WebSocketService.constructor.config", "scopeKind": "class"}, {"_type": "tag", "name": "disconnect", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^  disconnect() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "WebSocketService", "scopeKind": "class"}, {"_type": "tag", "name": "getConnectionState", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^  getConnectionState() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "WebSocketService", "scopeKind": "class"}, {"_type": "tag", "name": "handleReconnect", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^  handleReconnect() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "WebSocketService", "scopeKind": "class"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^        const headers = {$/", "language": "JavaScript", "kind": "class", "scope": "WebSocketService.initializeSocket", "scopeKind": "class"}, {"_type": "tag", "name": "initializeSocket", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^  initializeSocket() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "WebSocketService", "scopeKind": "class"}, {"_type": "tag", "name": "maxReconnectAttempts", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^      maxReconnectAttempts: process.env.REACT_APP_WS_MAX_RECONNECT_ATTEMPTS || 5,$/", "language": "JavaScript", "kind": "property", "scope": "WebSocketService.constructor.config", "scopeKind": "class"}, {"_type": "tag", "name": "notifyListeners", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^  notifyListeners(event, data) {$/", "language": "JavaScript", "kind": "method", "signature": "(event, data)", "scope": "WebSocketService", "scopeKind": "class"}, {"_type": "tag", "name": "reconnectAttempts", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^      reconnectAttempts: 0,$/", "language": "JavaScript", "kind": "property", "scope": "WebSocketService.constructor.config", "scopeKind": "class"}, {"_type": "tag", "name": "reconnectDelay", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^      reconnectDelay: process.env.REACT_APP_WS_RECONNECT_DELAY || 2000,$/", "language": "JavaScript", "kind": "property", "scope": "WebSocketService.constructor.config", "scopeKind": "class"}, {"_type": "tag", "name": "reconnectDelayMax", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^      reconnectDelayMax: process.env.REACT_APP_WS_RECONNECT_DELAY_MAX || 10000,$/", "language": "JavaScript", "kind": "property", "scope": "WebSocketService.constructor.config", "scopeKind": "class"}, {"_type": "tag", "name": "removeEventListener", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^  removeEventListener(event, callback) {$/", "language": "JavaScript", "kind": "method", "signature": "(event, callback)", "scope": "WebSocketService", "scopeKind": "class"}, {"_type": "tag", "name": "send", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^  send(data) {$/", "language": "JavaScript", "kind": "method", "signature": "(data)", "scope": "WebSocketService", "scopeKind": "class"}, {"_type": "tag", "name": "setupEventHandlers", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^  setupEventHandlers() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "WebSocketService", "scopeKind": "class"}, {"_type": "tag", "name": "timeout", "path": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "pattern": "/^      timeout: process.env.REACT_APP_WS_TIMEOUT || 10000,$/", "language": "JavaScript", "kind": "property", "scope": "WebSocketService.constructor.config", "scopeKind": "class"}], "filename": "/home/kavia/workspace/daily-journal-keeper-journal-management-container-10528-10533/journal_entry_component/src/services/websocketService.js", "hash": "6086bd6f85fc0cf6311d62629f91a841", "format-version": 4, "code-base-name": "default", "fields": [{"name": "'Connection': 'Upgrade',", "scope": "WebSocketService.initializeSocket.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "'Sec-WebSocket-Protocol': 'v1.journal-app',", "scope": "WebSocketService.initializeSocket.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "'Sec-WebSocket-Version': '13'", "scope": "WebSocketService.initializeSocket.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "'Upgrade': 'websocket',", "scope": "WebSocketService.initializeSocket.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "autoConnect: true,", "scope": "WebSocketService.constructor.config", "scopeKind": "class", "description": "unavailable"}, {"name": "defaultUrl: process.env.REACT_APP_WS_URL || 'ws:\\/\\/localhost:8080'", "scope": "WebSocketService.constructor.config", "scopeKind": "class", "description": "unavailable"}, {"name": "maxReconnectAttempts: process.env.REACT_APP_WS_MAX_RECONNECT_ATTEMPTS || 5,", "scope": "WebSocketService.constructor.config", "scopeKind": "class", "description": "unavailable"}, {"name": "reconnectAttempts: 0,", "scope": "WebSocketService.constructor.config", "scopeKind": "class", "description": "unavailable"}, {"name": "reconnectDelay: process.env.REACT_APP_WS_RECONNECT_DELAY || 2000,", "scope": "WebSocketService.constructor.config", "scopeKind": "class", "description": "unavailable"}, {"name": "reconnectDelayMax: process.env.REACT_APP_WS_RECONNECT_DELAY_MAX || 10000,", "scope": "WebSocketService.constructor.config", "scopeKind": "class", "description": "unavailable"}, {"name": "timeout: process.env.REACT_APP_WS_TIMEOUT || 10000,", "scope": "WebSocketService.constructor.config", "scopeKind": "class", "description": "unavailable"}]}